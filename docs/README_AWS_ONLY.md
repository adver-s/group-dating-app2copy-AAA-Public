# ğŸš€ AWS-Only Development Environment

## æ¦‚è¦
ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯å®Œå…¨ã«AWSç’°å¢ƒã§å‹•ä½œã™ã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒ­ãƒ¼ã‚«ãƒ«MySQLã¯ä½¿ç”¨ã—ã¾ã›ã‚“ã€‚

## ğŸ¯ ç‰¹å¾´

### âœ… AWSå®Œå…¨ç§»è¡Œã®ãƒ¡ãƒªãƒƒãƒˆ
- **é–‹ç™ºåŠ¹ç‡**: ãƒ­ãƒ¼ã‚«ãƒ«DBè¨­å®šå•é¡Œã‚’å®Œå…¨è§£æ±º
- **å®‰å®šæ€§**: 99.99%å¯ç”¨æ€§ã®Aurora MySQL Serverless v2
- **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£**: è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ï¼ˆ0.5-16 ACUï¼‰
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: VPCå†…é…ç½®ã€æš—å·åŒ–ã€IAMçµ±åˆ
- **ã‚³ã‚¹ãƒˆåŠ¹ç‡**: å¾“é‡èª²é‡‘ï¼ˆå®Ÿéš›ã®ä½¿ç”¨é‡ã®ã¿ï¼‰

### ğŸ”§ ä½¿ç”¨æŠ€è¡“
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: AWS Aurora MySQL Serverless v2
- **ã‚¤ãƒ³ãƒ•ãƒ©**: Terraform
- **èªè¨¼**: AWS Cognito
- **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: AWS S3
- **ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**: AWS EC2

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. å‰ææ¡ä»¶
```bash
# AWS CLIè¨­å®š
aws configure

# Terraformã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
brew install terraform

# ç’°å¢ƒå¤‰æ•°è¨­å®š
export DB_PASSWORD="your-secure-password"
```

### 2. ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
npm run setup:aws
```

### 3. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
```bash
npm run dev
```

## ğŸ“‹ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### Step 1: AWSèªè¨¼æƒ…å ±è¨­å®š
```bash
aws configure
# AWS Access Key ID: your-access-key
# AWS Secret Access Key: your-secret-key
# Default region name: ap-northeast-1
# Default output format: json
```

### Step 2: ç’°å¢ƒå¤‰æ•°è¨­å®š
```bash
export DB_PASSWORD="your-secure-password"
```

### Step 3: AWSã‚¤ãƒ³ãƒ•ãƒ©ãƒ‡ãƒ—ãƒ­ã‚¤
```bash
npm run setup:aws
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã§ä»¥ä¸‹ãŒè‡ªå‹•å®Ÿè¡Œã•ã‚Œã¾ã™ï¼š
- Aurora MySQL Serverless v2ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ä½œæˆ
- VPCã€ã‚µãƒ–ãƒãƒƒãƒˆã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ä½œæˆ
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
- ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿æŠ•å…¥

### Step 4: é–‹ç™ºé–‹å§‹
```bash
npm run dev
```

## ğŸ”§ é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºï¼ˆAWSæ¥ç¶šï¼‰
```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm test

# ãƒ“ãƒ«ãƒ‰
npm run build
```

### æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤
```bash
# æœ¬ç•ªç’°å¢ƒã«ãƒ‡ãƒ—ãƒ­ã‚¤
npm run deploy:aws
```

### ã‚¤ãƒ³ãƒ•ãƒ©ç®¡ç†
```bash
# TerraformåˆæœŸåŒ–
npm run terraform:init

# ã‚¤ãƒ³ãƒ•ãƒ©ãƒ—ãƒ©ãƒ³ç¢ºèª
npm run terraform:plan

# ã‚¤ãƒ³ãƒ•ãƒ©ãƒ‡ãƒ—ãƒ­ã‚¤
npm run terraform:apply

# ã‚¤ãƒ³ãƒ•ãƒ©å‰Šé™¤
npm run terraform:destroy
```

## ğŸ“Š ä½œæˆã•ã‚Œã‚‹AWSãƒªã‚½ãƒ¼ã‚¹

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- **Aurora MySQL Serverless v2**
  - ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼: `dating-app-aurora-cluster`
  - ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹: `dating-app-aurora-instance`
  - å®¹é‡: 0.5-16 ACUï¼ˆè‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ï¼‰

### ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯
- **VPC**: `10.0.0.0/16`
- **Public Subnets**: `10.0.1.0/24`, `10.0.2.0/24`
- **Private Subnets**: `10.0.3.0/24`, `10.0.4.0/24`
- **Security Groups**: Auroraç”¨ã€EC2ç”¨

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- **IAM Roles**: æœ€å°æ¨©é™åŸå‰‡
- **Secrets Manager**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹èªè¨¼æƒ…å ±
- **VPCå†…é…ç½®**: ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚µãƒ–ãƒãƒƒãƒˆ

## ğŸ’° ã‚³ã‚¹ãƒˆæœ€é©åŒ–

### Aurora Serverless v2
- **æœ€å°å®¹é‡**: 0.5 ACUï¼ˆç´„$15/æœˆï¼‰
- **æœ€å¤§å®¹é‡**: 16 ACUï¼ˆç´„$480/æœˆï¼‰
- **å®Ÿéš›ã®ä½¿ç”¨é‡ã«å¿œã˜ã¦èª²é‡‘**

### æ¨å¥¨è¨­å®š
- **é–‹ç™ºç’°å¢ƒ**: 0.5-2 ACU
- **æœ¬ç•ªç’°å¢ƒ**: 2-8 ACU

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

#### 1. AWSèªè¨¼æƒ…å ±ã‚¨ãƒ©ãƒ¼
```bash
# èªè¨¼æƒ…å ±ç¢ºèª
aws sts get-caller-identity

# å†è¨­å®š
aws configure
```

#### 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼
```bash
# æ¥ç¶šãƒ†ã‚¹ãƒˆ
curl http://localhost:3000/api/debug/check-db

# Auroraã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆç¢ºèª
cd infra/terraform
terraform output aurora_cluster_endpoint
```

#### 3. Terraformã‚¨ãƒ©ãƒ¼
```bash
# çŠ¶æ…‹ãƒªã‚»ãƒƒãƒˆ
cd infra/terraform
terraform destroy
terraform init
terraform apply
```

#### 4. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼
```bash
# ã‚¹ã‚­ãƒ¼ãƒãƒªã‚»ãƒƒãƒˆ
npx prisma migrate reset
npx prisma migrate deploy
```

## ğŸ“ˆ ç›£è¦–ã¨ãƒ­ã‚°

### CloudWatch
- **ãƒ¡ãƒˆãƒªã‚¯ã‚¹**: CPUã€ãƒ¡ãƒ¢ãƒªã€æ¥ç¶šæ•°
- **ãƒ­ã‚°**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚°
- **ã‚¢ãƒ©ãƒ¼ãƒ **: ç•°å¸¸æ¤œçŸ¥

### è¨­å®šä¾‹
```bash
# CloudWatchãƒ­ã‚°ç¢ºèª
aws logs describe-log-groups
aws logs tail /aws/rds/instance/dating-app-aurora
```

## ğŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
- âœ… VPCå†…é…ç½®
- âœ… ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—è¨­å®š
- âœ… IAMæœ€å°æ¨©é™
- âœ… æš—å·åŒ–æœ‰åŠ¹
- âœ… ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è¨­å®š
- âœ… ç›£æŸ»ãƒ­ã‚°æœ‰åŠ¹

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
- [ ] VPCå†…é…ç½®
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—è¨­å®š
- [ ] IAMæœ€å°æ¨©é™
- [ ] æš—å·åŒ–æœ‰åŠ¹
- [ ] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è¨­å®š
- [ ] ç›£æŸ»ãƒ­ã‚°æœ‰åŠ¹

## ğŸ”„ ç’°å¢ƒç®¡ç†

### é–‹ç™ºç’°å¢ƒ
```bash
# é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
npm run setup:aws
```

### æœ¬ç•ªç’°å¢ƒ
```bash
# æœ¬ç•ªç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤
npm run deploy:aws
```

### ç’°å¢ƒåˆ‡ã‚Šæ›¿ãˆ
```bash
# é–‹ç™ºç’°å¢ƒ
cp env.example .env
npm run setup:aws

# æœ¬ç•ªç’°å¢ƒ
cp env.production.example .env.production
npm run deploy:aws
```

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆï¼š
1. ãƒ­ã‚°ã‚’ç¢ºèª
2. CloudWatchãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ç¢ºèª
3. TerraformçŠ¶æ…‹ã‚’ç¢ºèª
4. å¿…è¦ã«å¿œã˜ã¦ãƒªã‚½ãƒ¼ã‚¹ã‚’å†ä½œæˆ

## ğŸ‰ å®Œäº†

AWSç’°å¢ƒã¸ã®å®Œå…¨ç§»è¡Œã«ã‚ˆã‚Šï¼š
- é–‹ç™ºåŠ¹ç‡ãŒå¤§å¹…ã«å‘ä¸Š
- ãƒã‚°ã®åŸå› ã¨ãªã‚‹ãƒ­ãƒ¼ã‚«ãƒ«DBå•é¡Œã‚’è§£æ±º
- æœ¬ç•ªç’°å¢ƒã¨ã®å·®ç•°ã‚’æœ€å°åŒ–
- ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ãªã‚¤ãƒ³ãƒ•ãƒ©ã‚’ç²å¾—

**Happy AWS Development! ğŸš€**
